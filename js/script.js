const questions = [
	{
		question: "What is malware?",
		answers: [
			{text: "To capture screenshots of a user's activities", correct: false},
			{text: "Software that helps improve computer performance", correct: false},
			{text: "Malicious software intended to harm or exploit computer systems", correct: true},
			{text: "Software used for data encryption", correct: false},
		]
	},
	{
		question: "Which of the following is NOT a type of malware?",
		answers: [
			{text: "Virus", correct: false},
			{text: "Spyware", correct: false},
			{text: "Firewall", correct: true},
			{text: "Ransomware", correct: false},
		]
	},
	{
		question: "Which type of malware disguises itself as a legitimate program or file?",
		answers: [
			{text: "Worm", correct: false},
			{text: "Trojan Horse", correct: true},
			{text: "Adware", correct: false},
			{text: "Botnet", correct: false},
		]		
	},
	{
		question: "What is the purpose of ransomware?",
		answers: [
			{text: "To steal sensitive information", correct: false},
			{text: "To slow down computer performance", correct: false},
			{text: "To gain unauthorized access to a system", correct: false},
			{text: "To encrypt files and demand a ransom", correct: true},
		]
	},
	{
		question: "How does adware typically behave on a computer?",
		answers: [
			{text: "It displays unwanted advertisements", correct: true},
			{text: "It monitors and records keystrokes", correct: false},
			{text: "It spreads rapidly across a network", correct: false},
			{text: "It deletes important system files", correct: false},
		]
	},
	{
		question: "What is the most common way for malware to enter a computer system?",
		answers: [
			{text: "Through physical access to the computer", correct: false},
			{text: "Through the internet, via malicious downloads or infected websites", correct: true},
			{text: "Through email attachments", correct: false},
			{text: "Through software updates", correct: false},
		]		
	},
	{
		question: "What is the purpose of a keylogger?",
		answers: [
			{text: "To capture screenshots of a user's activities", correct: false},
			{text: "To track a user's browsing history", correct: false},
			{text: "To record a user's keystrokes and steal sensitive information", correct: true},
			{text: "To display pop-up advertisements", correct: false},
		]		
	},
	{
		question: "Which type of malware spreads by replicating itself and attaching to other files or programs?",
		answers: [
			{text: "Worm", correct: true},
			{text: "Trojan Horse", correct: false},
			{text: "Adware", correct: false},
			{text: "Rootkit", correct: false},
		]
	},
	{
		question: "What is the term for a malicious program that spreads by sending copies of itself to other computers over a network?",
		answers: [
			{text: "Botnet", correct: false},
			{text: "Virus", correct: true},
			{text: "Ransomware", correct: false},
			{text: "Spyware", correct: false},
		]
	},
	{
		question: "What is the purpose of a firewall in relation to malware?",
		answers: [
			{text: "To detect and remove malware from a computer", correct: false},
			{text: "To prevent malware from entering or leaving a computer network", correct: true},
			{text: "To encrypt data to protect it from malware attacks", correct: false},
			{text: "To slow down the spread of malware on a computer system", correct: false},
		]		
	}
];

const questionElement = document.getElementById("question");
const answerButtons = document.getElementById("answer-buttons");
const nextButton = document.getElementById("next-btn");

let currentQuestionIndex = 0;
let score = 0;

function startQuiz() {
  currentQuestionIndex = 0;
  score = 0;
  nextButton.innerHTML = "Next";
  showQuestion();
}

function showQuestion() {
  resetState();
  let currentQuestion = questions[currentQuestionIndex];
  questionElement.textContent = currentQuestion.question;

  currentQuestion.answers.forEach((answer, index) => {
    const button = document.createElement("button");
    button.textContent = answer.text;
    button.classList.add("btn");
    button.addEventListener("click", () => {
      selectAnswer(index);
    });
    answerButtons.appendChild(button);
  });
}

function resetState() {
  nextButton.style.display = "none";
  while (answerButtons.firstChild) {
    answerButtons.removeChild(answerButtons.firstChild);
  }
}

function selectAnswer(answerIndex) {
  let currentQuestion = questions[currentQuestionIndex];
  let selectedAnswer = currentQuestion.answers[answerIndex];
  let correctAnswerIndex = currentQuestion.answers.findIndex(
    (answer) => answer.correct
  );

  if (answerIndex === correctAnswerIndex) {
    score++;
    answerButtons.children[answerIndex].classList.add("correct");
  } else {
    answerButtons.children[answerIndex].classList.add("incorrect");
    answerButtons.children[correctAnswerIndex].classList.add("correct");
  }

  Array.from(answerButtons.children).forEach((button) => {
    button.disabled = true;
  });

  nextButton.style.display = "block";

  if (currentQuestionIndex === questions.length - 1) {
    nextButton.innerHTML = "Finish";
  }
}

function showScore() {
  resetState();
  questionElement.innerHTML = `You scored ${score} out of ${questions.length}!`;
  nextButton.innerHTML = "Re-take Quiz";
  nextButton.style.display = "block";
}

function handleNextButton() {
  currentQuestionIndex++;
  if (currentQuestionIndex < questions.length) {
    showQuestion();
  } else {
    showScore();
  }
}

nextButton.addEventListener("click", () => {
  if (currentQuestionIndex < questions.length) {
    handleNextButton();
  } else {
    startQuiz();
  }
});

startQuiz();

